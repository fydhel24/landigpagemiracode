---
import { Image } from "astro:assets";
import decorForm from "../../assets/pics/contact-pic.png";
---

<div class="relative bg-gray-50 rounded-3xl overflow-hidden">
  <form
    action="https://formspree.io/f/TU_FORM_ID"
    method="POST"
    class="bg-white rounded-2xl shadow-sm max-w-lg"
  >
    <div class="flex flex-col sm:flex-row gap-4 mb-6">
      <div class="flex items-center gap-3">
        <input
          type="radio"
          id="inquiry"
          name="type"
          value="consulta"
          class="radio-tech"
          checked
        />
        <label for="inquiry" class="text-gray-800 font-medium">Consulta técnica</label>
      </div>
      <div class="flex items-center gap-3">
        <input
          type="radio"
          id="quote"
          name="type"
          value="cotizacion"
          class="radio-tech"
        />
        <label for="quote" class="text-gray-800 font-medium">Cotización de proyecto</label>
      </div>
    </div>

    <div class="mb-5">
      <label for="name" class="block text-gray-700 mb-2 font-medium">Nombre*</label>
      <input
        type="text"
        id="name"
        name="name"
        required
        placeholder="Tu nombre"
        class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"
      />
    </div>

    <div class="mb-5">
      <label for="email" class="block text-gray-700 mb-2 font-medium">Email*</label>
      <input
        type="email"
        id="email"
        name="email"
        required
        placeholder="tu@email.com"
        class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"
      />
    </div>

    <div class="mb-6">
      <label for="message" class="block text-gray-700 mb-2 font-medium">Mensaje*</label>
      <textarea
        id="message"
        name="message"
        required
        placeholder="Cuéntanos sobre tu proyecto, necesidades o idea..."
        rows="5"
        class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"
      ></textarea>
    </div>

    <button
      type="submit"
      class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 rounded-xl transition shadow hover:shadow-md"
    >
      Enviar mensaje
    </button>
  </form>

  <!-- Ilustración decorativa -->
  <div class="hidden lg:block absolute -right-16 top-0 bottom-0 w-[200px]">
    <Image
      src={decorForm}
      alt="Ilustración decorativa de código y tecnología"
      class="h-full w-auto object-contain opacity-80"
    />
  </div>
</div>

<style>
  .radio-tech {
    appearance: none;
    width: 20px;
    height: 20px;
    border: 2px solid #3b82f6;
    border-radius: 50%;
    outline: none;
    cursor: pointer;
    position: relative;
    transition: all 0.2s ease;
  }

  .radio-tech:checked {
    border-color: #3b82f6;
  }

  .radio-tech:checked::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 8px;
    height: 8px;
    background: #3b82f6;
    border-radius: 50%;
    transform: translate(-50%, -50%);
  }
</style>

<script>
  // Funcionalidad: actualizar mensaje al cambiar opción
  function setupForm() {
    const quoteRadio = document.getElementById('quote');
    const inquiryRadio = document.getElementById('inquiry');
    const messageField = document.getElementById('message');

    if (!quoteRadio || !inquiryRadio || !messageField) return;

    quoteRadio.addEventListener('change', () => {
      if (quoteRadio.checked) {
        messageField.value = messageField.value || "Estamos interesados en desarrollar un proyecto. ¿Podrían enviarnos una cotización? Gracias.";
      }
    });

    inquiryRadio.addEventListener('change', () => {
      if (inquiryRadio.checked && messageField.value.includes("cotización")) {
        messageField.value = "";
      }
    });
  }

  setupForm();
  document.addEventListener('astro:after-swap', setupForm);
</script>